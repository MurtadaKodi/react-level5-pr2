{"ast":null,"code":"import _slicedToArray from\"/Users/user/development/arch-card/react-level5/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import\"./product-details.css\";import{useGetOneProductQuery}from\"Redux/productsApi\";import{useParams}from\"react-router-dom\";import{Badge,Box,Button,CircularProgress,IconButton,Typography,styled}from\"@mui/material\";import DetailsThumb from\"./DetailsThumb\";import{useDispatch,useSelector}from\"react-redux\";import{addToCart,decreaseQuantity,increaseQuantity}from\"Redux/cartSlice\";import{Add,Remove,ShoppingCart}from\"@mui/icons-material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StyledBadge=styled(Badge)(function(_ref){var theme=_ref.theme;return{\"& .MuiBadge-badge\":{}};});var ProductDetails=function ProductDetails(){var dispatch=useDispatch();var _useSelector=useSelector(// @ts-ignore\nfunction(state){return state.carttt;}),selectedProducts=_useSelector.selectedProducts,selectedProductsID=_useSelector.selectedProductsID;var _useParams=useParams(),id=_useParams.id;// data => only one product\nvar _useGetOneProductQuer=useGetOneProductQuery(id),data=_useGetOneProductQuer.data,error=_useGetOneProductQuer.error,isLoading=_useGetOneProductQuer.isLoading;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),index=_useState2[0],setindex=_useState2[1];var myRef=useRef(null);var handleTab=function handleTab(index){// this.setState({index: index})\nsetindex(index);var images=myRef.current.children;for(var i=0;i<images.length;i++){images[i].className=images[i].className.replace(\"active\",\"\");}images[index].className=\"active\";};var productQuantity=function productQuantity(itemAPI){var myProduct=selectedProducts.find(function(itemUser){return itemUser.id===itemAPI.id;});return myProduct.quantity;};if(isLoading){return/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\"},children:/*#__PURE__*/_jsx(CircularProgress,{})});}if(error){return/*#__PURE__*/_jsx(Box,{sx:{display:\"flex\"},children:/*#__PURE__*/_jsxs(Typography,{variant:\"h1\",color:\"error\",children:[\" \",\"ERROR\",\" \"]})});}if(data){return/*#__PURE__*/_jsx(\"div\",{className:\"app details-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"big-img\",children:/*#__PURE__*/_jsx(\"img\",{src:data.imageLink[index],alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h2\",{children:data.productName}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",data.price]})]}),/*#__PURE__*/_jsx(\"p\",{children:data.description}),/*#__PURE__*/_jsx(DetailsThumb,{images:data.imageLink,tab:handleTab,myRef:myRef}),selectedProductsID.includes(data.id)?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",marginTop:\"33px\"},children:[/*#__PURE__*/_jsx(IconButton,{color:\"primary\",sx:{mr:\"10px\"},onClick:function onClick(){dispatch(decreaseQuantity(data));},children:/*#__PURE__*/_jsx(Remove,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(StyledBadge,{badgeContent:productQuantity(data),color:\"primary\"}),/*#__PURE__*/_jsx(IconButton,{color:\"primary\",sx:{ml:\"10px\"},onClick:function onClick(){dispatch(increaseQuantity(data));},children:/*#__PURE__*/_jsx(Add,{fontSize:\"small\"})})]}):/*#__PURE__*/_jsxs(Button,{sx:{textTransform:\"capitalize\",p:1,lineHeight:1.1},variant:\"contained\",color:\"primary\",onClick:function onClick(){dispatch(addToCart(data));},children:[/*#__PURE__*/_jsx(ShoppingCart,{sx:{fontSize:\"18px\",mr:1}}),\" Add to cart\"]})]})]})});}};export default ProductDetails;","map":{"version":3,"names":["React","useRef","useState","useGetOneProductQuery","useParams","Badge","Box","Button","CircularProgress","IconButton","Typography","styled","DetailsThumb","useDispatch","useSelector","addToCart","decreaseQuantity","increaseQuantity","Add","Remove","ShoppingCart","StyledBadge","theme","ProductDetails","dispatch","state","carttt","selectedProducts","selectedProductsID","id","data","error","isLoading","index","setindex","myRef","handleTab","images","current","children","i","length","className","replace","productQuantity","itemAPI","myProduct","find","itemUser","quantity","display","imageLink","productName","price","description","includes","alignItems","marginTop","mr","ml","textTransform","p","lineHeight","fontSize"],"sources":["/Users/user/development/arch-card/react-level5/frontend/src/pages/details/product-details.jsx"],"sourcesContent":["import React, { useRef, useState } from \"react\";\nimport \"./product-details.css\";\nimport { useGetOneProductQuery } from \"Redux/productsApi\";\nimport { useParams } from \"react-router-dom\";\nimport {\n  Badge,\n  Box,\n  Button,\n  CircularProgress,\n  IconButton,\n  Typography,\n  styled,\n} from \"@mui/material\";\nimport DetailsThumb from \"./DetailsThumb\";\n\nimport { useDispatch, useSelector } from \"react-redux\";\n\nimport { addToCart, decreaseQuantity, increaseQuantity } from \"Redux/cartSlice\";\nimport { Add, Remove, ShoppingCart } from \"@mui/icons-material\";\n\nconst StyledBadge = styled(Badge)(({ theme }) => ({\n  \"& .MuiBadge-badge\": {},\n}));\n\nconst ProductDetails = () => {\n  const dispatch = useDispatch();\n  const { selectedProducts, selectedProductsID } = useSelector(\n    // @ts-ignore\n    (state) => state.carttt\n  );\n  let { id } = useParams();\n  // data => only one product\n  const { data, error, isLoading } = useGetOneProductQuery(id);\n\n  const [index, setindex] = useState(0);\n  const myRef = useRef(null);\n\n  const handleTab = (index) => {\n    // this.setState({index: index})\n    setindex(index);\n    const images = myRef.current.children;\n    for (let i = 0; i < images.length; i++) {\n      images[i].className = images[i].className.replace(\"active\", \"\");\n    }\n    images[index].className = \"active\";\n  };\n\n  const productQuantity = (itemAPI) => {\n    const myProduct = selectedProducts.find((itemUser) => {\n      return itemUser.id === itemAPI.id;\n    });\n\n    return myProduct.quantity;\n  };\n\n  if (isLoading) {\n    return (\n      <Box sx={{ display: \"flex\" }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box sx={{ display: \"flex\" }}>\n        <Typography variant=\"h1\" color=\"error\">\n          {\" \"}\n          ERROR{\" \"}\n        </Typography>\n      </Box>\n    );\n  }\n  if (data) {\n    return (\n      <div className=\"app details-page\">\n        <div className=\"details\">\n          <div className=\"big-img\">\n            <img src={data.imageLink[index]} alt=\"\" />\n          </div>\n\n          <div className=\"box\">\n            <div className=\"row\">\n              <h2>{data.productName}</h2>\n              <span>${data.price}</span>\n            </div>\n            {/* <Colors colors={data.colors} /> */}\n\n            <p>{data.description}</p>\n\n            <DetailsThumb\n              images={data.imageLink}\n              tab={handleTab}\n              myRef={myRef}\n            />\n            {/* <button className=\"cart\">Add to cart</button> */}\n            {selectedProductsID.includes(data.id) ? (\n              <div\n                style={{\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  marginTop: \"33px\",\n                }}\n              >\n                <IconButton\n                  color=\"primary\"\n                  sx={{ mr: \"10px\" }}\n                  onClick={() => {\n                    dispatch(decreaseQuantity(data));\n                  }}\n                >\n                  <Remove fontSize=\"small\" />\n                </IconButton>\n\n                <StyledBadge\n                  badgeContent={productQuantity(data)}\n                  color=\"primary\"\n                />\n\n                <IconButton\n                  color=\"primary\"\n                  sx={{ ml: \"10px\" }}\n                  onClick={() => {\n                    dispatch(increaseQuantity(data));\n                  }}\n                >\n                  <Add fontSize=\"small\" />\n                </IconButton>\n              </div>\n            ) : (\n              <Button\n                sx={{ textTransform: \"capitalize\", p: 1, lineHeight: 1.1 }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  dispatch(addToCart(data));\n                }}\n              >\n                <ShoppingCart sx={{ fontSize: \"18px\", mr: 1 }} /> Add to cart\n              </Button>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default ProductDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}